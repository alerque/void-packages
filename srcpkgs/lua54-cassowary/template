# Template file for 'lua54-cassowary'
pkgname=lua54-cassowary
version=2.2
revision=1
create_wrksrc=yes
hostmakedepends="lua51 lua52 lua53 lua54"
makedepends="lua51-devel lua52-devel lua53-devel lua54-devel"
depends="lua54"
_desc="A Lua port of the cassowary constraint solver engine"
short_desc="${_desc} (5.4.x)"
maintainer=""
license="MIT"
homepage="https://github.com/sile-typesetter/cassowary.lua"
distfiles="https://github.com/sile-typesetter/cassowary.lua/archive/v${version}.tar.gz"
checksum=e2f7774b6883581491b8f2c9d1655b2136bc24d837a9e43f515590a766ec4afd

post_extract() {
	mv "cassowary.lua-v${version}" lua54
	cp -a lua54 lua53
	cp -a lua54 lua52
	cp -a lua54 lua51
}

do_install() {
	for x in lua54 lua53 lua52 lua51; do
		vinstall "$x/cassowary/init.lua" 755 "usr/lib/lua/5.${x#lua5}"
	done
	vlicense lua54/LICENSE
}

lua54-cjson_package() {
	depends="lua54"
	short_desc="${_desc} (5.4.x)"
	pkg_install() {
		vmove usr/lib/lua/5.4
		vlicense ${wrksrc}/lua54/LICENSE
	}
}

lua53-cjson_package() {
	depends="lua53"
	short_desc="${_desc} (5.3.x)"
	pkg_install() {
		vmove usr/lib/lua/5.3
		vlicense ${wrksrc}/lua53/LICENSE
	}
}

lua52-cjson_package() {
	depends="lua52"
	short_desc="${_desc} (5.2.x)"
	pkg_install() {
		vmove usr/lib/lua/5.2
		vlicense ${wrksrc}/lua52/LICENSE
	}
}

lua51-cjson_package() {
	depends="lua51"
	short_desc="${_desc} (5.1.x)"
	pkg_install() {
		vmove usr/lib/lua/5.1
		vlicense ${wrksrc}/lua51/LICENSE
	}
}
